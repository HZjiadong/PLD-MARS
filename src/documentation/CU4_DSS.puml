@startuml
actor Agent
boundary IHM
autonumber
Agent -> IHM : Consulter la liste des contrats souscrits
IHM -[#red]> Système : SM 4.1 consulterListeSouscription(idClient)
Système --> IHM : List<idSouscription, Souscription, idContrat, Contrat, idDomaine, Domaine>

alt
    Agent -> IHM : Consulter les infos détaillées d'une souscription
    IHM -[#red]> Système : SM 4.2 consulterDetailSouscription(idSouscription)
    Système -[#0000FF]-> IHM : idSouscription, List<idOption, Option>, idAgent, Agent
    Agent -> IHM : Consulter les details d'une option
    alt
    Agent -> IHM : Consulter les détails d'une option
    Agent -> IHM : Passer en modification
        alt
        Agent -> IHM : Consulter les details d'une option
        else
        Agent -> IHM : Valider la modification
        IHM -[#red]> Système : SM 4.3 validerContratModif(idSouscription, idContrat, Contrat, idOption, idAgent, Agent)
        Système -[#0000FF]-> IHM : CRE
        end
    else
    Agent -> IHM : Mettre fin à la souscription
    IHM -[#red]> Système : SM 4.5 resilierSouscription(idSouscription, idAgent, Agent)
    Système -[#0000FF]-> IHM : CRE
    end
else
    Agent -> IHM : Consulter la liste des contrats fournis par la banque
    IHM -[#red]> Système : SM 4.6 consulterContrats()
    Système -[#0000FF]-> IHM : List<idContrat, Contrat, List<idDomaine, Domaine>>

    Agent -> IHM : Consulter les infos détaillées du contrat
    IHM -[#red]> Système : SM 4.7 consulterDetailContrat(idContrat)
    Système -[#0000FF]-> IHM : idContrat, Contrat, List<idOption, Option>

    Agent -> IHM : Créer une nouvelle souscription
    IHM -[#red]> Système : SM 4.8 creerSouscription(idClient, idContact, idContrat, Souscription, list<idOption>, idAgent, Agent)
    Système -[#0000FF]-> IHM : CRE
end
@enduml